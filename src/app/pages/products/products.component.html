<div class="breadcrumb">
  <a [routerLink]="['/']">–ì–æ–ª–æ–≤–Ω–∞</a> >
  <a [routerLink]="['/products']" [queryParams]="{ category: category }">
    {{
      category === 'men'
        ? '–ß–æ–ª–æ–≤—ñ–∫–∞–º'
        : category === 'women'
          ? '–ñ—ñ–Ω–∫–∞–º'
          : category === 'shoes'
            ? '–í–∑—É—Ç—Ç—è'
            : category === 'accessories'
              ? '–ê–∫—Å–µ—Å—É–∞—Ä–∏'
              : '–°–ø–æ—Ä—Ç–∏–≤–Ω–∏–π –æ–¥—è–≥'
    }}
  </a>
  @if (subcategory) {
    >
    <a [routerLink]="['/products']" [queryParams]="{ category: category, subcategory: subcategory }">
      {{
        subcategory === 'tshirts'
          ? '–§—É—Ç–±–æ–ª–∫–∏'
          : subcategory === 'hoodies'
            ? '–•—É–¥—ñ'
            : subcategory === 'dresses'
              ? '–°—É–∫–Ω—ñ'
              : subcategory === 'pants'
                ? '–®—Ç–∞–Ω–∏'
                : subcategory
      }}
    </a>
  }
</div>

<main>
  <div class="container">
    <aside class="filters">
      <h2>
        {{
          subcategory
            ? (subcategory === 'tshirts'
              ? '–§—É—Ç–±–æ–ª–∫–∏'
              : subcategory === 'hoodies'
                ? '–•—É–¥—ñ'
                : subcategory === 'dresses'
                  ? '–°—É–∫–Ω—ñ'
                  : subcategory === 'pants'
                    ? '–®—Ç–∞–Ω–∏'
                    : subcategory)
            : (category === 'men'
              ? '–ß–æ–ª–æ–≤—ñ–∫–∞–º'
              : category === 'women'
                ? '–ñ—ñ–Ω–∫–∞–º'
                : category === 'shoes'
                  ? '–í–∑—É—Ç—Ç—è'
                  : category === 'accessories'
                    ? '–ê–∫—Å–µ—Å—É–∞—Ä–∏'
                    : '–°–ø–æ—Ä—Ç–∏–≤–Ω–∏–π –æ–¥—è–≥')
        }}
      </h2>
      <ul>
        @if (category === 'men') {
          <li>
            <a [routerLink]="['/products']" [queryParams]="{ category: category, subcategory: 'tshirts' }"
            >–§—É—Ç–±–æ–ª–∫–∏</a
            >
          </li>
          <li>
            <a [routerLink]="['/products']" [queryParams]="{ category: category, subcategory: 'hoodies' }"
            >–•—É–¥—ñ</a
            >
          </li>
          <li>
            <a [routerLink]="['/products']" [queryParams]="{ category: category, subcategory: 'pants' }"
            >–®—Ç–∞–Ω–∏</a
            >
          </li>
        }
        @if (category === 'women') {
          <li>
            <a [routerLink]="['/products']" [queryParams]="{ category: category, subcategory: 'tshirts' }"
            >–§—É—Ç–±–æ–ª–∫–∏</a
            >
          </li>
          <li>
            <a [routerLink]="['/products']" [queryParams]="{ category: category, subcategory: 'dresses' }"
            >–°—É–∫–Ω—ñ</a
            >
          </li>
          <li>
            <a [routerLink]="['/products']" [queryParams]="{ category: category, subcategory: 'pants' }"
            >–®—Ç–∞–Ω–∏</a
            >
          </li>
        }
        @if (category === 'shoes' || category === 'accessories' || category === 'sportswear') {
          <li>
            <a
              [routerLink]="['/products']"
              [queryParams]="{ category: category, subcategory: category }"
            >{{
                category === 'shoes'
                  ? '–í–∑—É—Ç—Ç—è'
                  : category === 'accessories'
                    ? '–ê–∫—Å–µ—Å—É–∞—Ä–∏'
                    : '–°–ø–æ—Ä—Ç–∏–≤–Ω–∏–π –æ–¥—è–≥'
              }}</a
            >
          </li>
        }
      </ul>
      <div class="price-filter">
        <label>–¶—ñ–Ω–∞, –≥—Ä–Ω</label>
        <div class="price-range">
          <input type="number" [(ngModel)]="minPrice" (ngModelChange)="onPriceFilterChange()" min="0" />
          <input type="number" [(ngModel)]="maxPrice" (ngModelChange)="onPriceFilterChange()" min="0" />
        </div>
        <button (click)="onPriceFilterChange()">OK</button>
        <button (click)="resetPriceFilter()">–°–∫–∏–Ω—É—Ç–∏</button>
      </div>
    </aside>

    <section class="products">
      <div class="sort">
        <span>–°–æ—Ä—Ç—É–≤–∞—Ç–∏:</span>
        <a
          href="#"
          [class.active]="sortOption === 'popularity'"
          (click)="sortByPopularity(); $event.preventDefault()"
        >–∑–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ñ—Å—Ç—é</a
        >
        <a
          href="#"
          [class.active]="sortOption === 'price-asc'"
          (click)="sortByPriceAsc(); $event.preventDefault()"
        >—Å–ø–æ—á–∞—Ç–∫—É –¥–µ—à–µ–≤—à–µ</a
        >
        <a
          href="#"
          [class.active]="sortOption === 'price-desc'"
          (click)="sortByPriceDesc(); $event.preventDefault()"
        >—Å–ø–æ—á–∞—Ç–∫—É –¥–æ—Ä–æ–∂—á—ñ</a
        >
        <a
          href="#"
          [class.active]="sortOption === 'name'"
          (click)="sortByName(); $event.preventDefault()"
        >–∑–∞ –Ω–∞–∑–≤–æ—é</a
        >
        <div class="view-options">
          <span>–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:</span>
          <button
            class="grid-view"
            [class.active]="viewMode === 'grid'"
            (click)="setView('grid')"
          >
            ‚ò∞
          </button>
          <button
            class="list-view"
            [class.active]="viewMode === 'list'"
            (click)="setView('list')"
          >
            ‚â°
          </button>
        </div>
      </div>

      <div class="product-list" [ngClass]="viewMode">
        @if (filteredProducts.length > 0) {
          @for (product of filteredProducts; track product.id) {
            <div class="product">
              <a
                class="product-link"
                [routerLink]="['/product', product.id]"
                [queryParams]="{ category: product.category, subcategory: product.subcategory }"
              >
                <img
                  [src]="product.image || 'https://via.placeholder.com/200'"
                  [alt]="product.name"
                />
                <h3>{{ product.name }}</h3>
                <p>{{ product.price }} –≥—Ä–Ω</p>
                <button class="availability-btn">–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</button>
                <div class="product-actions">
                  <button
                    class="action-btn cart-btn"
                    (click)="addToCart(product, $event)"
                  >
                    üõí
                  </button>
                  <button
                    class="action-btn wishlist-btn"
                    (click)="addToWishlist(product, $event)"
                  >
                    ‚ô°
                  </button>
                  <button
                    class="action-btn compare-btn"
                    (click)="addToCompare(product, $event)"
                  >
                    ‚áÑ
                  </button>
                </div>
              </a>
            </div>
          }
        } @else {
          <p>–ü—Ä–æ–¥—É–∫—Ç–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>
        }
      </div>
    </section>
  </div>
</main>
